{% macro render_entries(entries, count, offset, feed_id, group_id, read_ids, saved_ids) %}
    {% set ns = namespace(prev_date = '') %}
    {% for e in entries %}
        {% set date = e.published_on|since_today %}
        {% if date != ns.prev_date %}
            <li class="heading">
                <h2><time>{{date}}</time></h2>
            </li>            
        {% endif %}
        <li id="entry-{{e.id}}" class="entry {%if e.id in read_ids %}status-read{% else %}status-unread{% endif %}">
            <div class="entry-card">
                <input class="sr-only" onchange="Sweat.onEntryLoad({{e.id}}, '{{e.title|urlencode}}', event)" id="c-{{e.id}}" type="radio" value="{{e.id}}" name="entries">
                <label for="c-{{e.id}}">
                    <div class="entry-card__status"></div>
                    <div>
                        <h3 class="entry-card__title">
                            {% if e.title%}
                                {{e.title}}
                            {% else %}
                                {{ e.content|striptags|excerpt }}
                            {% endif %}                            
                        </h3>
                        <h4 class="entry-card__feed">
                            {{e.feed.title}}
                        </h4>
                    </div>
                    {%if e.thumbnail_url %} 
                        <div class="entry-card__thumbnail">
                            <img loading="lazy" src="{{e.thumbnail_url}}" alt="">
                        </div>
                    {% endif %}                    
                </label>
            </div>
        </li>
        {% set ns.prev_date = date  %}
    {% else %}
        <div class="notice">
            <div>
                <i class="fa fa-tint fa-4x"></i>
                <p>No articles found.</p>
            </div>
        </div>  
    {% endfor %}
    {% if offset < count %}
        <li class="more">
            {% if feed_id %}
                {% set request_url = url_for('main.entry_list', feed_id=feed_id, offset=offset, prev_date=prev_date, xhr=1) %}
            {% elif group_id %}
                {% set request_url = url_for('main.entry_list', group_id=group_id, offset=offset, prev_date=prev_date, xhr=1) %}
            {% else %}
                {% set request_url = url_for('main.entry_list', offset=offset, prev_date=prev_date, xhr=1) %}
            {% endif %}
            <button class="btn-text" onclick="Sweat.loadMore('{{request_url}}')">More</button>
        </li>
    {% endif %} 
{% endmacro %}


{% macro render_group_label(id, title, unread_count) %}
    {% set request_url = url_for('main.entry_list', _external=True, group_id=id, xhr=1) %}
    <label class="btn-folder" id="label-group-{{id}}" for="group-{{id}}" onclick="Sweat.loadFolder('{{request_url}}', '{{title}}', event)">
        <i class="fa fa-folder"></i><span>{{title}}</span>  
    </label>
    <span class="badge">{{unread_count if unread_count else ''}}</span>                                          
{% endmacro %}


{% macro render_feed_label(feed) %}
    {% set request_url = url_for('main.entry_list', _external=True, feed_id=feed.id, xhr=1) %}
    <label class="btn-item" id="label-feed-{{feed.id}}" for="feed-{{feed.id}}" type="button" onclick="Sweat.loadFolder('{{request_url}}', '{{feed.title}}', event)">
        <img class="favicon" src="{{feed.icon_url}}" width="16" height="16"  alt="*">
        <span class="{{ '' if feed.enabled else 'feed-dead' }}">{{feed.title}}</span>
    </label>
    <span class="badge">{{feed.feed_read_count if feed.feed_read_count else ''}}</span> 
{% endmacro %}  


{% macro render_alerts() %}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="alerts">
                {% for category, message in messages %}
                    <div class="alert alert--{{ category }}">{{ message|safe }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
{% endmacro %}  

